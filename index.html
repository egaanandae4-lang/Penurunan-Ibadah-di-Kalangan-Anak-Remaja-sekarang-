<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Ibadah Remaja</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Variabel Warna */
        :root {
            --bg-color: #f4f4f4;
            --container-bg: white;
            --text-color: #333;
            --accent-color: #3498db;
            --hover-color: #2980b9;
        }
        [data-theme="dark"] {
            --bg-color: #2c3e50;
            --container-bg: #34495e;
            --text-color: #ecf0f1;
            --accent-color: #3498db;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .dashboard {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 200px;
            background: var(--accent-color);
            padding: 20px;
            color: white;
            transition: background-color 0.3s;
        }
        .sidebar h2 {
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin: 10px 0;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .sidebar li:hover {
            background: rgba(255,255,255,0.2);
        }
        .main-content {
            flex: 1;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .container {
            background: var(--container-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            transition: background-color 0.3s;
        }
        h1, h2 {
            text-align: center;
            color: var(--accent-color);
        }
        
        /* Statistik */
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .stat-box {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            margin: 10px;
            min-width: 200px;
            transition: background-color 0.3s;
        }
        [data-theme="dark"] .stat-box {
            background: #34495e;
        }
        .stat-box i {
            font-size: 2em;
            color: var(--accent-color);
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #e74c3c;
            transition: width 0.5s;
        }

        /* Tabel & Grafik */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: var(--accent-color);
            color: white;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        .filter-select {
            margin: 10px;
            padding: 5px;
        }

        /* Tombol & Kontrol */
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            background: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }
        button:hover {
            background: var(--hover-color);
        }

        /* Gaya untuk tombol edit dan hapus */
        button.edit-btn {
            background: #27ae60;
        }
        button.delete-btn {
            background: #e74c3c;
        }
        button.edit-btn:hover {
            background: #229954;
        }
        button.delete-btn:hover {
            background: #c0392b;
        }

        .theme-toggle {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }
        .back-button {
            background: none;
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
            padding: 5px 10px;
            cursor: pointer;
            display: inline-block;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .audio-btn {
            background: none;
            color: var(--accent-color);
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            margin-left: 10px;
        }
        .audio-btn:hover {
            color: var(--hover-color);
        }

        /* Header dan Pencarian Baru */
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .search-bar {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 5px 10px;
            background: var(--container-bg);
            transition: border-color 0.3s;
        }
        .search-bar:focus-within {
            border-color: var(--accent-color);
        }
        .search-bar input {
            border: none;
            outline: none;
            background: transparent;
            color: var(--text-color);
            padding: 5px;
        }
        .search-bar i {
            color: var(--text-color);
            margin-right: 5px;
        }

        /* Notifikasi Toast */
        #toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1001;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @keyframes fadein {
            from { right: 0; opacity: 0; }
            to { right: 20px; opacity: 1; }
        }
        @keyframes fadeout {
            from { right: 20px; opacity: 1; }
            to { right: 0; opacity: 0; }
        }

        /* Profil & Unggah Foto */
        input[type="file"] {
            display: none;
        }
        .custom-file-upload {
            border: 1px solid var(--accent-color);
            display: inline-block;
            padding: 6px 12px;
            cursor: pointer;
            background: var(--accent-color);
            color: white;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .custom-file-upload:hover {
            background: var(--hover-color);
        }
        #profile-picture {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
            border: 3px solid var(--accent-color);
        }

        /* Daftar Web, Tips, Doa, Hadis */
        .list-item {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .list-item h4 {
            margin-top: 0;
            color: var(--accent-color);
        }
        .list-item p {
            margin: 5px 0 0;
        }
        .list-item a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: bold;
        }
        .arab {
            font-family: 'Amiri', 'Traditional Arabic', serif;
            font-size: 1.5em;
            text-align: right;
            direction: rtl;
        }
        .transliterasi {
            font-style: italic;
            font-size: 1.2em;
        }
        .doa-group {
            padding-left: 20px;
        }
        
        .gerakan-step {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 20px;
        }
        .gerakan-step img {
            width: 120px;
            height: auto;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .gerakan-desc {
            flex: 1;
        }
        .gerakan-desc h4 {
            margin-top: 0;
            color: var(--accent-color);
        }

        /* Gaya Checklist Sholat 40 Hari */
        .checklist-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
            text-align: center;
        }
        .checklist-table th, .checklist-table td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        .checklist-table th {
            background-color: var(--accent-color);
            color: white;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        .checklist-table td:first-child {
            font-weight: bold;
            text-align: left;
            position: sticky;
            left: 0;
            background-color: var(--container-bg);
            z-index: 2;
        }
        .checklist-table td:first-child:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-right: 1px solid #ddd;
            z-index: -1;
        }
        .checklist-table tr:hover {
            background-color: #f1f1f1;
        }
        [data-theme="dark"] .checklist-table td:first-child {
            background-color: var(--container-bg);
        }
        
        /* Gaya untuk sel tabel checklist yang baru */
        .checklist-cell {
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .checklist-cell:hover {
            opacity: 0.8;
        }
        .checklist-cell.green {
            background-color: #2ecc71;
            color: white;
        }
        .checklist-cell.orange {
            background-color: #e67e22;
            color: white;
        }
        .checklist-cell.red {
            background-color: #e74c3c;
            color: white;
        }

        /* Gaya untuk tombol warna */
        .color-btn {
            border: none;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .color-btn:hover {
            opacity: 1;
        }

        #no-results {
            text-align: center;
            font-size: 1.2em;
            color: #e74c3c;
            display: none;
        }
        
        /* Gaya untuk Google Search Engine */
        .gsc-control-cse {
            background-color: var(--container-bg) !important;
            border: none !important;
            box-shadow: none !important;
        }
        .gsc-search-button-v2 {
            display: none !important;
        }
        .gsc-input {
            border: 1px solid #ccc !important;
            border-radius: 20px !important;
            padding: 10px !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }
        .gsc-results-wrapper-visible {
            display: block !important;
        }
        .gsc-result {
            padding: 15px !important;
            border-bottom: 1px solid #eee !important;
        }
        .gsc-resultsbox-visible {
            border: none !important;
        }
        .gsc-search-box {
            display: block !important;
            width: 100% !important;
        }
        
        /* CSS untuk menyembunyikan hasil pencarian sebelum ada input */
        .gsc-control-cse .gsc-results {
            display: none;
        }
        
        /* Media Queries untuk Responsif */
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                order: 1;
                padding: 10px;
                overflow-x: auto;
                white-space: nowrap;
                border-radius: 0 0 10px 10px;
            }
            .sidebar h2 {
                display: none;
            }
            .sidebar ul {
                display: flex;
                flex-direction: row;
                gap: 10px;
                justify-content: space-between;
                width: max-content;
            }
            .sidebar li {
                display: inline-block;
                padding: 8px 12px;
                border-radius: 20px;
                font-size: 0.8em;
                margin: 0;
            }
            .sidebar li i {
                margin-right: 5px;
            }
            .main-content {
                order: 2;
                padding-top: 10px;
            }
            .stats {
                flex-direction: column;
            }
            .gerakan-step {
                flex-direction: column;
                align-items: center;
            }
            .checklist-table th, .checklist-table td {
                padding: 4px;
            }
            .header-container {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        /* Gaya untuk Jurnal Harian */
        #journal-section textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
            background: var(--container-bg);
            color: var(--text-color);
        }
        #journal-section button {
            margin-top: 10px;
        }
        #journal-list {
            margin-top: 20px;
        }
        .journal-entry {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
            margin-bottom: 10px;
        }
        .journal-entry h4 {
            margin: 0;
            font-size: 1.1em;
            color: var(--accent-color);
        }
        .journal-entry p {
            margin: 5px 0 0;
        }
        /* GAYA BARU UNTUK TOMBOL EDIT/HAPUS */
        .journal-entry-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .journal-entry-actions button {
            padding: 5px 10px;
            font-size: 0.9em;
        }
        .journal-entry-actions button.edit-btn {
            background-color: #3498db;
        }
        .journal-entry-actions button.delete-btn {
            background-color: #e74c3c;
        }
        [data-theme="dark"] .journal-entry-actions button {
            background-color: #556c82;
            color: white;
        }

        /* Gaya untuk Forum Diskusi */
        .forum-post {
            background: #f1f1f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .forum-post .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #777;
            margin-bottom: 10px;
        }
        .forum-post .post-body h4 {
            margin-top: 0;
        }
        .forum-post .post-body p {
            margin-bottom: 0;
        }
        .forum-post .comments {
            margin-top: 15px;
            padding-left: 20px;
            border-left: 2px solid var(--accent-color);
        }
        .forum-post .comment {
            background: #e9e9e9;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        [data-theme="dark"] .forum-post {
            background: #4a6176;
        }
        [data-theme="dark"] .forum-post .comment {
            background: #556c82;
        }

        /* Gaya Notifikasi Simulasi */
        .notification-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #27ae60;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1002;
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        .notification-container.hidden {
            animation: slideOut 0.5s ease-in forwards;
        }
        .notification-container h4 {
            margin: 0 0 5px;
        }
        .notification-container p {
            margin: 0;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* Gaya untuk badge */
        .badge-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        .badge {
            text-align: center;
            opacity: 0.5;
            transition: opacity 0.3s;
        }
        .badge.unlocked {
            opacity: 1;
        }
        .badge i {
            font-size: 3em;
            color: #f1c40f;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .badge p {
            font-size: 0.9em;
            margin-top: 5px;
        }

        /* Gaya untuk Quiz */
        #quiz-container {
            text-align: left;
        }
        .quiz-item {
            border-bottom: 1px solid #ddd;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .quiz-item label {
            display: block;
            margin-top: 5px;
        }

    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
    <script async src="https://cse.google.com/cse.js?cx=94e8fa0762f794b19"></script>
</head>
<body>
    <div class="theme-toggle">
        <button onclick="toggleTheme()"><i class="fas fa-moon"></i> Dark Mode</button>
    </div>
    <div id="toast"></div>

    <div id="prayer-notification" class="notification-container">
        <h4><i class="fas fa-bell"></i> Waktu Sholat Tiba!</h4>
        <p>Ayo, segera tunaikan sholat <span id="prayer-name"></span>.</p>
    </div>

    <div class="dashboard">
        <nav class="sidebar">
            <h2><i class="fas fa-chart-line"></i> Dashboard</h2>
            <ul>
                <li onclick="showSection('home')"><i class="fas fa-home"></i> Beranda</li>
                <li onclick="showSection('stats')"><i class="fas fa-chart-bar"></i> Statistik</li>
                <li onclick="showSection('chart')"><i class="fas fa-chart-line"></i> Grafik</li>
                <li onclick="showSection('table')"><i class="fas fa-table"></i> Tabel Data</li>
                <li onclick="showSection('checklist')"><i class="fas fa-clipboard-check"></i> Checklist 40 Hari</li>
                <li onclick="showSection('journal')"><i class="fas fa-book"></i> Jurnal Ibadah</li>
                <li onclick="showSection('quiz')"><i class="fas fa-question-circle"></i> Kuis Harian</li>
                <li onclick="showSection('forum')"><i class="fas fa-comments"></i> Forum Remaja</li>
                <li onclick="showSection('achievements')"><i class="fas fa-trophy"></i> Pencapaian</li>
                <li onclick="showSection('tips')"><i class="fas fa-lightbulb"></i> Trik & Tips</li>
                <li onclick="showSection('doa')"><i class="fas fa-pray"></i> Doa & Bacaan</li>
                <li onclick="showSection('gerakan-sholat')"><i class="fas fa-mosque"></i> Gerakan Sholat</li>
                <li onclick="showSection('wudhu')"><i class="fas fa-hand-holding-water"></i> Wudhu</li>
                <li onclick="showSection('hadis')"><i class="fas fa-book-open"></i> Hadis</li>
                <li onclick="showSection('profile')"><i class="fas fa-user-circle"></i> Profil</li>
                <li onclick="showSection('web')"><i class="fas fa-globe"></i> Web</li>
                <li onclick="showSection('leaderboard')"><i class="fas fa-trophy"></i> Leaderboard Poin</li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="header-container">
                <h1 style="margin: 0;">Dashboard</h1>
                <div class="gcse-searchbox-only"></div>
            </div>
            
            <p id="no-results" style="display: none;">Tidak ada hasil yang ditemukan.</p>

            <div class="container">
                <section id="search-results-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <div class="gcse-searchresults-only"></div>
                </section>

                <section id="home-section" style="display: block;">
                    <h2>Selamat Datang di Dashboard</h2>
                    <p style="text-align: center;">Dashboard ini menyajikan data hipotetis mengenai tren penurunan ibadah di kalangan remaja. Data ini bersifat edukatif dan terinspirasi dari riset global. Gunakan navigasi di samping untuk menjelajahi statistik, trik, doa, dan hadis.</p>
                    
                    <div class="container" style="margin-top: 20px;">
                        <h3><i class="fas fa-bullhorn"></i> Informasi Terbaru</h3>
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin-bottom: 10px;"><i class="fas fa-circle-check" style="color: #27ae60;"></i> Data 2024 berhasil ditambahkan. Grafik dan tabel telah diperbarui!</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-circle-check" style="color: #27ae60;"></i> Fitur Dark Mode kini tersedia untuk kenyamanan Anda.</li>
                            <li style="margin-bottom: 10px;"><i class="fas fa-circle-check" style="color: #27ae60;"></i> Fitur **Checklist Sholat 40 Hari** telah ditambahkan. Ayo mulai konsisten!</li>
                        </ul>
                    </div>
                </section>

                <section id="stats-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Statistik Penurunan Ibadah</h2>
                    <div class="stats">
                        <div class="stat-box">
                            <i class="fas fa-arrow-down"></i>
                            <h3>Penurunan 2020-2024</h3>
                            <p id="penurunan">25% (dari 70% ke 45% rutin sholat/ibadah)</p>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-penurunan" style="width: 45%;"></div>
                            </div>
                        </div>
                        <div class="stat-box">
                            <i class="fas fa-mobile-alt"></i>
                            <h3>Faktor Utama</h3>
                            <p id="faktor">Sosmed (60%), Sibuk Belajar (30%)</p>
                        </div>
                        <div class="stat-box">
                            <i class="fas fa-lightbulb"></i>
                            <h3>Rekomendasi</h3>
                            <p>Edukasi Digital & Program Remaja Online</p>
                        </div>
                    </div>
                </section>

                <section id="chart-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Grafik Tren Penurunan</h2>
                    <div class="controls">
                        <label>Filter Tahun: </label>
                        <select class="filter-select" id="yearFilter" onchange="filterChart()">
                            <option value="all">Semua Tahun</option>
                            <option value="2020-2022">2020-2022</option>
                            <option value="2022-2024">2022-2024</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="myChart"></canvas>
                    </div>
                </section>

                <section id="table-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Tabel Data Detail</h2>
                    <table id="dataTable">
                        <thead>
                            <tr>
                                <th>Tahun</th>
                                <th>Persentase Remaja Rutin Ibadah (%)</th>
                                <th>Faktor Penyebab Penurunan</th>
                                <th>Saran Solusi</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </section>

                <section id="checklist-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Checklist Sholat Fardhu 40 Hari</h2>
                    <p style="text-align: center;">Tantang dirimu untuk sholat 5 waktu selama 40 hari tanpa terlewat. Ini adalah langkah awal yang luar biasa untuk menguatkan ibadahmu. </p>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <p style="font-weight: bold;">Pilih Warna dan Simbol:</p>
                        <button class="color-btn" data-color="green" style="background-color: #2ecc71; color: white;">✓ Tepat Waktu</button>
                        <button class="color-btn" data-color="orange" style="background-color: #e67e22; color: white;">● Terlambat</button>
                        <button class="color-btn" data-color="red" style="background-color: #e74c3c; color: white;">✗ Tidak Sholat</button>
                    </div>

                    <div style="overflow-x: auto;">
                        <table class="checklist-table">
                            <thead>
                                <tr>
                                    <th>Sholat</th>
                                    <section id="achievements-section" style="display: none;">
     <div class="badge-container">
        <div class="badge" id="badge-first-day">
            <i class="fas fa-sun"></i>
            <p>Hari Pertama</p>
        </div>
        <div class="badge" id="badge-10-days">
            <i class="fas fa-star"></i>
            <p>10 Hari Berturut-turut</p>
        </div>
        <div class="badge" id="badge-40-days">
            <i class="fas fa-medal"></i>
            <p>40 Hari Sempurna</p>
        </div>
        <div class="badge" id="badge-first-journal">
            <i class="fas fa-feather-alt"></i>
            <p>Jurnal Pertama</p>
        </div>
        <div class="badge" id="badge-quiz-master">
            <i class="fas fa-brain"></i>
            <p>Quiz Master</p>
        </div>
        
        <div class="badge" id="badge-point-master">
            <i class="fas fa-money-check-alt"></i>
            <p>Master Poin</p>
        </div>
        
    </div>
</section>  
                                    <script>
                                        for (let i = 1; i <= 40; i++) {
                                            document.write(`<th>Hari ${i}</th>`);
                                        }
                                    </script>
                                </tr>
                            </thead>
                            <tbody id="checklist-body"></tbody>
                        </table>
                    </div>
                    <div class="controls" style="margin-top: 20px;">
                        <button onclick="clearChecklist()">Reset Checklist</button>
                    </div>
                </section>
                
                <section id="journal-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2><i class="fas fa-book"></i> Jurnal Ibadah Harian</h2>
                    <p style="text-align: center;">Catat ibadahmu hari ini dan dapatkan poin!</p>
                    
                    <div class="container" style="margin-bottom: 20px;">
                        <h3>Tambah Ibadah Baru</h3>
                        <label for="ibadah-select">Pilih Ibadah:</label>
                        <select id="ibadah-select" class="filter-select">
                            <option value="Sholat Fardhu">Sholat Fardhu</option>
                            <option value="Sholat Sunnah">Sholat Sunnah</option>
                            <option value="Baca Al-Quran">Baca Al-Quran</option>
                            <option value="Sedekah">Sedekah</option>
                            <option value="Puasa Sunnah">Puasa Sunnah</option>
                            <option value="Lain-lain">Lain-lain</option>
                        </select>
                        <br>
                        <label for="ibadah-detail" style="display: block; margin-top: 10px;">Detail (opsional):</label>
                        <textarea id="ibadah-detail" placeholder="Contoh: Sholat Dhuha 2 rakaat, Baca 2 halaman juz 30" style="width: 100%; height: 80px;"></textarea>
                        <button onclick="addIbadah()">Tambahkan</button>
                    </div>

                    <div class="container">
                        <h3>Poin Ibadahmu: <span id="ibadah-points">0</span> Poin</h3>
                        <div id="journal-list">
                            </div>
                    </div>
                </section>

                <section id="quiz-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2><i class="fas fa-question-circle"></i> Kuis Harian</h2>
                    <p style="text-align: center;">Uji pengetahuanmu dan dapatkan poin tambahan!</p>
                    
                    <div class="container" id="quiz-container">
                        </div>
                </section>

                <section id="forum-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2><i class="fas fa-comments"></i> Forum Remaja</h2>
                    <p style="text-align: center;">Tempat berbagi, bertanya, dan saling menyemangati. Fitur ini adalah simulasi dari forum komunitas.</p>
                    <div class="forum-post">
                        <div class="post-header">
                            <span>Oleh: Budi</span>
                            <span>3 jam lalu</span>
                        </div>
                        <div class="post-body">
                            <h4>"Bagaimana cara konsisten baca Al-Quran setiap hari?"</h4>
                            <p>Saya sering semangat di awal, tapi sulit konsisten. Ada tips dari teman-teman di sini?</p>
                        </div>
                        <div class="comments">
                            <div class="comment">
                                <strong>Ria:</strong> Coba mulai dari 1 ayat saja, jangan langsung banyak. Yang penting rutin!
                            </div>
                            <div class="comment">
                                <strong>Ahmad:</strong> Setel alarm di HP, atau gabung grup tahsin online, biar ada yang ngingetin.
                            </div>
                        </div>
                    </div>
                    <div class="forum-post">
                        <div class="post-header">
                            <span>Oleh: Siti</span>
                            <span>1 hari lalu</span>
                        </div>
                        <div class="post-body">
                            <h4>"Alhamdulillah, checklist 40 hari saya hampir penuh!"</h4>
                            <p>Ternyata tantangannya seru. Doakan saya bisa selesai sampai 40 hari ya!</p>
                        </div>
                        <div class="comments">
                            <div class="comment">
                                <strong>Admin:</strong> Masya Allah! Selamat ya Siti, semoga istiqomah terus.
                            </div>
                        </div>
                    </div>
                </section>

                <section id="achievements-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2><i class="fas fa-trophy"></i> Pencapaian & Hadiah</h2>
                    <p style="text-align: center;">Raihlah pencapaian ini untuk menunjukkan komitmenmu dalam beribadah. Setiap pencapaian yang kamu raih akan memicu notifikasi.</p>
                    <div class="badge-container">
                        <div class="badge" id="badge-first-day">
                            <i class="fas fa-sun"></i>
                            <p>Hari Pertama</p>
                        </div>
                        <div class="badge" id="badge-10-days">
                            <i class="fas fa-star"></i>
                            <p>10 Hari Berturut-turut</p>
                        </div>
                        <div class="badge" id="badge-40-days">
                            <i class="fas fa-medal"></i>
                            <p>40 Hari Sempurna</p>
                        </div>
                        <div class="badge" id="badge-first-journal">
                            <i class="fas fa-feather-alt"></i>
                            <p>Jurnal Pertama</p>
                        </div>
                        <div class="badge" id="badge-quiz-master">
                            <i class="fas fa-brain"></i>
                            <p>Quiz Master</p>
                        </div>
                    </div>
                </section>
<section id="leaderboard-section" style="display: none;">
    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
    <h2><i class="fas fa-trophy"></i> Leaderboard Poin Ibadah</h2>
    <p style="text-align: center;">Bandingkan poin ibadahmu dengan remaja lainnya (Simulasi). Siapa yang paling konsisten?</p>
    
    <div class="container" style="padding: 10px; text-align: center; border: 2px solid var(--accent-color);">
        <h4 style="color: var(--accent-color); margin: 5px;">Poin Saya Minggu Ini: <span id="current-user-points-weekly">0</span> Poin</h4>
        <p style="font-size: 0.9em; margin: 5px;">Poin total ada di halaman Jurnal Ibadah.</p>
    </div>

    <table id="leaderboard-table" style="margin-top: 20px;">
        <thead>
            <tr>
                <th style="width: 50px;">Rank</th>
                <th>Nama Pengguna</th>
                <th>Poin Minggu Ini</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
</section>


                <section id="tips-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Trik dan Tips Agar Semangat Ibadah</h2>
                    <div class="list-item">
                        <h4>1. Jadikan Ibadah Kebiasaan Kecil</h4>
                        <p>Mulai dari hal kecil, seperti salat satu waktu sehari, lalu tingkatkan bertahap. Konsistensi lebih penting daripada intensitas.</p>
                    </div>
                    <div class="list-item">
                        <h4>2. Manfaatkan Teknologi Positif</h4>
                        <p>Gunakan aplikasi pengingat salat, aplikasi Quran digital, atau dengarkan ceramah/podcast inspiratif di perjalanan.</p>
                    </div>
                    <div class="list-item">
                        <h4>3. Cari Lingkungan yang Mendukung</h4>
                        <p>Habiskan waktu dengan teman-teman yang juga peduli pada ibadah. Ikut kegiatan remaja di masjid atau komunitas keagamaan.</p>
                    </div>
                    <div class="list-item">
                        <h4>4. Temukan Makna di Balik Ibadah</h4>
                        <p>Pahami tujuan dari setiap ibadah. Salat bukan hanya gerakan, tapi sarana untuk berkomunikasi dengan Tuhan dan mencari ketenangan.</p>
                    </div>
                </section>

                <section id="doa-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Doa dan Bacaan Lengkap Sholat</h2>
                    <div class="list-item">
                        <h4>Niat dan Takbiratul Ihram<button class="audio-btn" onclick="playAudio('takbirAudio')"><i class="fas fa-play"></i></button></h4>
                        <p>Niat sholat (sesuai waktu sholat yang dikerjakan) dan membaca:</p>
                        <p class="arab">اَللّٰهُ أَكْبَرُ</p>
                        <p class="transliterasi">"Allahu Akbar."</p>
                        <p>Artinya: "Allah Maha Besar."</p>
                        <audio id="takbirAudio" src="URL_AUDIO_TAKBIROTUL_IHRAM.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Doa Iftitah<button class="audio-btn" onclick="playAudio('iftitahAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">
                            اَللهُ أَكْبَرُ كَبِيْرًا وَالْحَمْدُ لِلّٰهِ كَثِيْرًا وَسُبْحَانَ اللهِ بُكْرَةً وَأَصِيْلًا. إِنِّيْ وَجَّهْتُ وَجْهِيَ لِلَّذِيْ فَطَرَ السَّمَاوَاتِ وَالْأَرْضَ حَنِيْفًا مُسْلِمًا وَمَا أَنَا مِنَ الْمُشْرِكِيْنَ. إِنَّ صَلَاتِيْ وَنُسُكِيْ وَمَحْيَايَ وَمَمَاتِيْ لِلّٰهِ رَبِّ الْعَالَمِيْنَ. لَا شَرِيْكَ لَهُ وَبِذٰلِكَ أُمِرْتُ وَأَنَا مِنَ الْمُسْلِمِيْنَ.
                        </p>
                        <p class="transliterasi">
                            "Allahu Akbar kabira, wal hamdu lillahi katsira, wa subhanallahi bukratan wa ashila. Inni wajjahtu wajhiya lilladzi fataras-samawati wal-ardha hanifan musliman, wa ma ana minal musyrikin. Inna sholati wa nusuki wa mahyaya wa mamati lillahi rabbil 'alamin. La syarika lahu wa bidzalika umirtu wa ana minal muslimin."
                        </p>
                        <p>Artinya: "Allah Maha Besar dengan sebesar-besarnya. Segala puji hanya bagi Allah dengan pujian yang banyak. Maha Suci Allah di waktu pagi dan petang. Sesungguhnya aku hadapkan wajahku kepada Zat yang menciptakan langit dan bumi dengan lurus dan berserah diri, dan aku bukanlah dari golongan orang-orang musyrik. Sesungguhnya salatku, ibadahku, hidupku, dan matiku hanyalah untuk Allah, Tuhan semesta alam. Tidak ada sekutu bagi-Nya, dan karena itu aku diperintahkan dan aku termasuk golongan orang yang berserah diri (muslim)."</p>
                        <audio id="iftitahAudio" src="URL_AUDIO_IFITITAH.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Membaca Al-Fatihah<button class="audio-btn" onclick="playAudio('fatihahAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ</p>
                        <p class="transliterasi">1. "Bismillâhir-raḥmânir-raḥîm."</p>
                        <p class="arab">اَلْحَمْدُ لِلّٰهِ رَبِّ الْعٰلَمِيْنَۙ</p>
                        <p class="transliterasi">2. "Al-ḥamdu lillâhi rabbil-‘âlamîn."</p>
                        <p class="arab">اَلرَّحْمٰنِ الرَّحِيْمِۙ</p>
                        <p class="transliterasi">3. "Ar-raḥmânir-raḥîm."</p>
                        <p class="arab">مٰلِكِ يَوْمِ الدِّيْنِۗ</p>
                        <p class="transliterasi">4. "Mâliki yaumid-dîn."</p>
                        <p class="arab">اِيَّاكَ نَعْبُدُ وَاِيَّاكَ نَسْتَعِيْنُۗ</p>
                        <p class="transliterasi">5. "Iyyâka na‘budu wa iyyâka nasta‘în."</p>
                        <p class="arab">اِهْدِنَا الصِّرَاطَ الْمُسْتَقِيْمَۙ</p>
                        <p class="transliterasi">6. "Ihdinaṣ-ṣirâṭal-mustaqîm."</p>
                        <p class="arab">صِرَاطَ الَّذِيْنَ اَنْعَمْتَ عَلَيْهِمْ ەۙ غَيْرِ الْمَغْضُوْبِ عَلَيْهِمْ وَلَا الضَّاۤلِّيْنَ ࣖ</p>
                        <p class="transliterasi">7. "Ṣirâṭal-lażîna an‘amta ‘alaihim ghairil-maghḍûbi ‘alaihim wa laḍ-ḍâllîn."</p>
                        <audio id="fatihahAudio" src="URL_AUDIO_FATIHah.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Membaca Surat Pendek (Al-Ikhlas)<button class="audio-btn" onclick="playAudio('ikhlasAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">قُلْ هُوَ اللّٰهُ اَحَدٌ</p>
                        <p class="transliterasi">1. "Qul huwallâhu aḥad."</p>
                        <p class="arab">اَللّٰهُ الصَّمَدُ</p>
                        <p class="transliterasi">2. "Allâhuṣ-ṣamad."</p>
                        <p class="arab">لَمْ يَلِدْ وَلَمْ يُوْلَدْ</p>
                        <p class="transliterasi">3. "Lam yalid wa lam yûlad."</p>
                        <p class="arab">وَلَمْ يَكُنْ لَّهٗ كُفُوًا اَحَدٌ</p>
                        <p class="transliterasi">4. "Wa lam yakul lahû kufuwan aḥad."</p>
                        <audio id="ikhlasAudio" src="URL_AUDIO_AL_IKHLAS.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Rukuk<button class="audio-btn" onclick="playAudio('rukukAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">سُبْحَانَ رَبِّيَ الْعَظِيمِ وَبِحَمْدِهِ</p>
                        <p class="transliterasi">"Subhaana rabbiyal ‘adhiimi wa bihamdih." (3x)</p>
                        <p>Artinya: "Mahasuci Tuhanku yang Maha Agung dan dengan segala puji-Nya."</p>
                        <audio id="rukukAudio" src="URL_AUDIO_RUKUK.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>I'tidal<button class="audio-btn" onclick="playAudio('itidalAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">سَمِعَ اللّٰهُ لِمَنْ حَمِدَهُ</p>
                        <p class="transliterasi">"Sami‘allahu liman hamidah."</p>
                        <p>Artinya: "Allah mendengar orang yang memuji-Nya."</p>
                        <p class="arab">رَبَّنَا لَكَ الْحَمْدُ مِلْءَ السَّمَاوَاتِ وَمِلْءَ الأَرْضِ وَمِلْءَ مَا شِئْتَ مِنْ شَيْءٍ بَعْدُ</p>
                        <p class="transliterasi">"Rabbana lakal hamdu mil'us-samawati wa mil'ul-ardhi wa mil'a ma syi'ta min syai'in ba'du."</p>
                        <p>Artinya: "Ya Tuhan kami, hanya bagi-Mu segala puji, sepenuh langit, sepenuh bumi, dan sepenuh apa saja yang Engkau kehendaki sesudah itu."</p>
                        <audio id="itidalAudio" src="URL_AUDIO_I_TIDAL.mpu"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Sujud<button class="audio-btn" onclick="playAudio('sujudAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">سُبْحَانَ رَبِّيَ الأَعْلَى وَبِحَمْدِهِ</p>
                        <p class="transliterasi">"Subhaana rabbiyal a‘laa wa bihamdih." (3x)</p>
                        <p>Artinya: "Mahasuci Tuhanku yang Maha Tinggi dan dengan segala puji-Nya."</p>
                        <audio id="sujudAudio" src="URL_AUDIO_SUJUD.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Duduk di Antara Dua Sujud<button class="audio-btn" onclick="playAudio('dudukSujudAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">رَبِّ اغْفِرْ لِي وَارْحَمْنِي وَاجْبُرْنِي وَارْفَعْنِي وَارْزُقْنِي وَاهْدِنِي وَعَافِنِي وَاعْفُ عَنِّي</p>
                        <p class="transliterasi">"Rabbighfirli warhamni wajburni warfa'ni warzuqni wahdini wa'afini wa'fu anni."</p>
                        <p>Artinya: "Ya Tuhanku, ampunilah aku, sayangilah aku, tutuplah aibku, angkatlah derajatku, berilah aku rezeki, berilah aku petunjuk, berilah aku kesehatan, dan ampunilah aku."</p>
                        <audio id="dudukSujudAudio" src="URL_AUDIO_DUDUK_SUJUD.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Bacaan Tahiyat Awal (khusus rakaat kedua)<button class="audio-btn" onclick="playAudio('tahiyatAwalAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">اَلتَّحِيَّاتُ لِلّٰهِ وَالصَّلَوَاتُ الطَّيِّبَاتُ، اَلسَّلاَمُ عَلَيْكَ أَيُّهاَ النَّبِيُّ وَرَحْمَةُ اللهِ وَبَرَكَاتُهُ، اَلسَّلاَمُ عَلَيْنَا وَعَلَى عِبَادِ اللهِ الصَّالِحِيْنَ، أَشْهَدُ اَنْ لاَ إِلَهَ إِلاَّ اللهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُوْلُهُ</p>
                        <p class="transliterasi">"Attahiyyaatul mubaarakaatush shalawaatuth thayyibaatu lillaah. Assalaamu 'alaika ayyuhan-nabiyyu warahmatullaahi wabarakaatuh. Assalaamu 'alainaa wa 'alaa 'ibaadillaahish-shaalihiin. Asyhadu an laa ilaaha illallaah, wa asyhadu anna muhammadan 'abduhuu wa rasuuluh."</p>
                        <p>Artinya: "Segala penghormatan, keberkahan, shalawat, dan kebaikan adalah milik Allah. Semoga salam, rahmat Allah, dan berkah-Nya terlimpah padamu, wahai Nabi. Semoga salam juga terlimpah pada kami dan hamba-hamba Allah yang saleh. Aku bersaksi bahwa tiada Tuhan selain Allah, dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya."</p>
                        <audio id="tahiyatAwalAudio" src="URL_AUDIO_TAHIYAT_AWAL.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Bacaan Tahiyat Akhir (lengkap)<button class="audio-btn" onclick="playAudio('tahiyatAkhirAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">اَلتَّحِيَّاتُ لِلّٰهِ وَالصَّلَوَاتُ الطَّيِّبَاتُ، اَلسَّلاَمُ عَلَيْكَ أَيُّهاَ النَّبِيُّ وَرَحْمَةُ اللهِ وَبَرَكَاتُهُ، اَلسَّلاَمُ عَلَيْنَا وَعَلَى عِبَادِ اللهِ الصَّالِحِيْنَ، أَشْهَدُ اَنْ لاَ إِلَهَ إِلاَّ اللهُ وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُوْلُهُ. اَللَّهُمَّ صَلِّ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ، كَمَا صَلَّيْتَ عَلَى إِبْرَاهِيْمَ وَعَلَى آلِ إِبْرَاهِيْمَ، وَبَارِكْ عَلَى مُحَمَّدٍ وَعَلَى آلِ مُحَمَّدٍ، كَمَا بَارَكْتَ عَلَى إِبْرَاهِيْمَ وَعَلَى آلِ إِبْرَاهِيْمَ، فِي الْعَالَمِيْنَ إِنَّكَ حَمِيْدٌ مَجِيْدٌ</p>
                        <p class="transliterasi">"Attahiyyaatul mubaarakaatush shalawaatuth thayyibaatu lillaah. Assalaamu 'alaika ayyuhan-nabiyyu warahmatullaahi wabarakaatuh. Assalaamu 'alainaa wa 'alaa 'ibaadillaahish-shaalihiin. Asyhadu an laa ilaaha illallaah, wa asyhadu anna muhammadan 'abduhuu wa rasuuluh. Allaahumma shalli 'alaa muhammadin wa 'alaa aali muhammad, kamaa shallaita 'alaa ibraahiima wa 'alaa aali ibraahim. Wa baarik 'alaa muhammadin wa 'alaa aali muhammad, kamaa baarakta 'alaa ibraahiima wa 'alaa aali ibraahim. Fil 'aalamiina innaka hamidum majiid."</p>
                        <p>Artinya: "Segala penghormatan, keberkahan, shalawat, dan kebaikan adalah milik Allah. Semoga salam, rahmat Allah, dan berkah-Nya terlimpah padamu, wahai Nabi. Semoga salam juga terlimpah pada kami dan hamba-hamba Allah yang saleh. Aku bersaksi bahwa tiada Tuhan selain Allah, dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya. Ya Allah, limpahkanlah rahmat kepada Nabi Muhammad dan keluarga Nabi Muhammad, sebagaimana Engkau telah melimpahkan rahmat kepada Nabi Ibrahim dan keluarga Nabi Ibrahim. Dan limpahkanlah berkah kepada Nabi Muhammad dan keluarga Nabi Muhammad, sebagaimana Engkau melimpahkan berkah kepada Nabi Ibrahim dan keluarga Nabi Ibrahim. Sesungguhnya di alam semesta Engkau Maha Terpuji lagi Maha Mulia."</p>
                        <audio id="tahiyatAkhirAudio" src="URL_AUDIO_TAHIYAT_AKHIR.mp3"></audio>
                    </div>
                    <div class="list-item">
                        <h4>Salam<button class="audio-btn" onclick="playAudio('salamAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">اَلسَّلاَمُ عَلَيْكُمْ وَرَحْمَةُ اللهِ وَبَرَكَاتُهُ</p>
                        <p class="transliterasi">"Assalamu'alaikum wa rahmatullahi wa barakatuh."</p>
                        <p>Artinya: "Semoga keselamatan dan rahmat Allah serta berkah-Nya terlimpah untuk kalian."</p>
                        <audio id="salamAudio" src="URL_AUDIO_SALAM.mp3"></audio>
                    </div>
                </section>

                <section id="gerakan-sholat-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Panduan Gerakan Sholat yang Benar</h2>
                    <p style="text-align: center;">Ikuti langkah-langkah berikut untuk memastikan gerakan sholat Anda sesuai dengan sunnah.</p>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Berdiri Tegak dan Takbiratul Ihram">
                        <div class="gerakan-desc">
                            <h4>1. Berdiri Tegak dan Takbiratul Ihram</h4>
                            <p>Menghadap kiblat dengan posisi tangan diangkat sejajar bahu atau telinga. Ucapkan "Allahu Akbar".</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Sedekap (Qiyam)">
                        <div class="gerakan-desc">
                            <h4>2. Sedekap (Qiyam)</h4>
                            <p>Setelah takbir, letakkan tangan kanan di atas tangan kiri, di atas dada atau di bawah pusar. Bacaan sholat dimulai dari sini.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Rukuk">
                        <div class="gerakan-desc">
                            <h4>3. Rukuk</h4>
                            <p>Bungkukkan badan dengan punggung lurus, sejajar dengan tanah. Tangan memegang lutut. Pandangan lurus ke tempat sujud. Bacalah doa rukuk 3x.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan I'tidal">
                        <div class="gerakan-desc">
                            <h4>4. I'tidal (Bangun dari Rukuk)</h4>
                            <p>Angkat badan kembali ke posisi berdiri tegak. Tangan diluruskan di sisi badan. Bacalah doa i'tidal.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Sujud">
                        <div class="gerakan-desc">
                            <h4>5. Sujud</h4>
                            <p>Turun dan letakkan dahi, hidung, kedua telapak tangan, lutut, dan ujung-ujung jari kaki di lantai. Usahakan semua anggota sujud menempel sempurna. Baca doa sujud 3x.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Duduk di Antara Dua Sujud">
                        <div class="gerakan-desc">
                            <h4>6. Duduk di Antara Dua Sujud</h4>
                            <p>Angkat badan dari sujud dan duduklah dengan punggung lurus. Kaki kiri diduduki dan kaki kanan ditegakkan. Baca doa duduk di antara dua sujud.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Sujud Kedua">
                        <div class="gerakan-desc">
                            <h4>7. Sujud Kedua</h4>
                            <p>Ulangi gerakan sujud yang pertama dengan bacaan yang sama.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Tahiyat / Tasyahud">
                        <div class="gerakan-desc">
                            <h4>8. Tahiyat / Tasyahud</h4>
                            <p>Duduk seperti saat duduk di antara dua sujud (tasyahud awal) atau dengan posisi kaki kanan tegak dan pantat menyentuh lantai (tasyahud akhir). Baca doa tahiyat hingga selesai.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Salam">
                        <div class="gerakan-desc">
                            <h4>9. Salam</h4>
                            <p>Palingkan wajah ke kanan, lalu ke kiri, sambil mengucapkan "Assalamu'alaikum wa rahmatullah".</p>
                        </div>
                    </div>
                </section>

                <section id="wudhu-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Panduan Lengkap Wudhu yang Benar</h2>
                    <p style="text-align: center;">Wudhu adalah syarat sah sholat. Ikuti langkah-langkah berikut agar wudhu Anda sempurna.</p>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Basuh Tangan dan Niat">
                        <div class="gerakan-desc">
                            <h4>1. Niat dan Basuh Telapak Tangan<button class="audio-btn" onclick="playAudio('niatWudhuAudio')"><i class="fas fa-play"></i></button></h4>
                            <p>Niat Wudhu: <span class="transliterasi">"Nawaitul wudhuu’a lirof’il hadatsil ashghori fardlon lillaahi ta’aalaa."</span><br>Artinya: "Saya niat berwudu untuk menghilangkan hadas kecil, fardu karena Allah ta'ala."<br>Setelah itu, basuh telapak tangan tiga kali sambil menyela-nyela jari.</p>
                            <audio id="niatWudhuAudio" src=niatWudhuAudio"https://vt.tiktok.com/ZSDxXDxXv/.mp3"></audio>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Berkumur dan Membasuh Hidung">
                        <div class="gerakan-desc">
                            <h4>2. Berkumur dan Membasuh Hidung</h4>
                            <p>Kumur-kumur tiga kali. Masukkan air ke dalam hidung dan keluarkan tiga kali.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Membasuh Wajah">
                        <div class="gerakan-desc">
                            <h4>3. Membasuh Wajah</h4>
                            <p>Basuh seluruh wajah tiga kali dari dahi hingga dagu dan dari telinga kanan ke telinga kiri.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Membasuh Kedua Tangan">
                        <div class="gerakan-desc">
                            <h4>4. Membasuh Kedua Tangan</h4>
                            <p>Basuh tangan kanan dari ujung jari hingga siku tiga kali, lalu basuh tangan kiri dengan cara yang sama.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Mengusap Sebagian Kepala">
                        <div class="gerakan-desc">
                            <h4>5. Mengusap Sebagian Kepala</h4>
                            <p>Usap sebagian rambut kepala dengan tangan yang basah sekali.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Membasuh Kedua Telinga">
                        <div class="gerakan-desc">
                            <h4>6. Membasuh Kedua Telinga</h4>
                            <p>Usap telinga luar dan dalam dengan jari telunjuk dan ibu jari sekali.</p>
                        </div>
                    </div>
                    <div class="list-item gerakan-step">
                        <img src="" alt="Gerakan Membasuh Kedua Kaki">
                        <div class="gerakan-desc">
                            <h4>7. Membasuh Kedua Kaki</h4>
                            <p>Basuh kaki kanan hingga mata kaki tiga kali, lalu kaki kiri dengan cara yang sama. Pastikan sela-sela jari kaki juga dibersihkan.</p>
                        </div>
                    </div>
                    <div class="list-item">
                        <h4>8. Berdoa Setelah Wudhu<button class="audio-btn" onclick="playAudio('doaWudhuAudio')"><i class="fas fa-play"></i></button></h4>
                        <p class="arab">أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا اللهُ وَحْدَهُ لَا شَرِيكَ لَهُ، وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ. اَللَّهُمَّ اجْعَلْنِي مِنَ التَّوَّابِينَ، وَاجْعَلْنِي مِنَ الْمُتَطَهِّرِينَ، وَاجْعَلْنِي مِنْ عِبَادِكَ الصَّالِحِينَ</p>
                        <p class="transliterasi">"Asyhadu an laa ilaaha illallaahu wahdahuu laa syariikalahu, wa asyhadu anna muhammadan ‘abduhuu wa rosuuluh. Allohummaj’alnii minat tawwaabiina, waj’alnii minal mutathohhiriina, waj’alnii min ‘ibaadikas-shoolihiin."</p>
                        <p>Artinya: "Aku bersaksi bahwa tiada Tuhan selain Allah Yang Maha Esa, tiada sekutu bagi-Nya, dan aku bersaksi bahwa Muhammad adalah hamba dan utusan-Nya. Ya Allah, jadikanlah aku termasuk orang-orang yang bertaubat, dan jadikanlah aku termasuk orang-orang yang suci, dan jadikanlah aku termasuk hamba-hamba-Mu yang shalih."</p>
                        <audio id="doaWudhuAudio" src="URL_AUDIO_DOA_WUDHU.mp3"></audio>
                    </div>
                </section>

                <section id="hadis-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Hadis-hadis Pilihan tentang Ibadah</h2>
                    <div class="list-item">
                        <h4>Hadis tentang Salat Tepat Waktu</h4>
                        <p style="font-style: italic; font-size: 1.1em;">"Amal yang paling dicintai Allah adalah salat pada waktunya."</p>
                        <p>— HR. Bukhari dan Muslim</p>
                    </div>
                    <div class="list-item">
                        <h4>Hadis tentang Keutamaan Wudu</h4>
                        <p style="font-style: italic; font-size: 1.1em;">"Apabila seorang Muslim berwudu, kemudian ia membasuh mukanya, maka setiap dosa yang ia perbuat dengan mukanya akan keluar bersama air, atau bersama tetesan air yang terakhir..."</p>
                        <p>— HR. Muslim</p>
                    </div>
                    <div class="list-item">
                        <h4>Hadis tentang Keutamaan Bersujud</h4>
                        <p style="font-style: italic; font-size: 1.1em;">"Jarak terdekat seorang hamba dengan Tuhannya adalah ketika ia sedang bersujud."</p>
                        <p>— HR. Muslim</p>
                    </div>
                </section>

                <section id="profile-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Profil Pengguna</h2>
                    <div class="profile-container" style="text-align: center;">
                        <img id="profile-picture" src="https://i.ibb.co/L89YfHh/profil-placeholder.png" alt="Profil Pengguna">
                        <h3>Nama Pengguna</h3>
                        <p>Analis Data | Organisasi XYZ</p>
                        <p>Email: <a href="mailto:user@example.com">user@example.com</a></p>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                        <label for="file-upload" class="custom-file-upload">
                            <i class="fas fa-camera"></i> Unggah Foto
                        </label>
                        <input id="file-upload" type="file" accept="image/*" onchange="previewImage(event)"/>
                    </div>
                    <div style="margin-top: 20px;">
                        <p><strong>Bio:</strong> Saya adalah seorang analis data yang berfokus pada tren sosial dan perilaku remaja. Dashboard ini adalah proyek pribadi untuk memvisualisasikan data dan mengedukasi masyarakat tentang isu penting ini.</p>
                    </div>
                </section>

                <section id="web-section" style="display: none;">
                    <button class="back-button" onclick="showSection('home')"><i class="fas fa-arrow-left"></i> Kembali</button>
                    <h2>Sumber Data & Referensi Web</h2>
                    <p>Berikut adalah beberapa sumber referensi yang relevan dengan tren sosial dan data ibadah di kalangan remaja. Data pada dashboard ini bersifat hipotetis, namun terinspirasi dari riset sejenis.</p>
                    <ul class="web-list">
                        <li><i class="fas fa-link"></i> <a href="https://www.pewresearch.org/" target="_blank">Pew Research Center</a><p>Lembaga riset yang sering menerbitkan survei tentang agama dan kehidupan sosial di berbagai negara.</p></li>
                        <li><i class="fas fa-link"></i> <a href="https://www.bps.go.id/" target="_blank">Badan Pusat Statistik (BPS) Indonesia</a><p>Sumber data resmi pemerintah Indonesia untuk demografi dan statistik sosial.</p></li>
                        <li><i class="fas fa-link"></i> <a href="https://www.unicef.org/indonesia" target="_blank">UNICEF Indonesia</a><p>Informasi dan laporan tentang kesejahteraan, pendidikan, dan kesehatan anak dan remaja di Indonesia.</p></li>
                    </ul>
                </section>
                
                <div class="controls">
                    <button onclick="updateData()">Update Data (Simulasi 2024)</button>
                    <button onclick="resetData()">Reset Data</button>
                </div>
                <p id="info" style="text-align: center;">Catatan: Data ini bersifat edukatif. Untuk data real, konsultasikan dengan lembaga seperti Kemenag atau survei resmi.</p>
            </div>
        </main>
    </div>

    <script>
    // Data dashboard
    let database = [
        { year: 2020, percentage: 70, factor: 'Pandemi COVID-19 (kurang motivasi)', solution: 'Program online ibadah virtual' },
        { year: 2021, percentage: 60, factor: 'Kenaikan penggunaan TikTok/Instagram', solution: 'Batasan screen time & reminder app' },
        { year: 2022, percentage: 50, factor: 'Tekanan ujian sekolah & ekstrakurikuler', solution: 'Integrasi ibadah ke jadwal harian' },
        { year: 2023, percentage: 45, factor: 'Influence budaya pop & peer pressure', solution: 'Konseling remaja di masjid/gereja' },
        { year: 2024, percentage: 40, factor: 'AI & Metaverse distraction', solution: 'Workshop digital detox untuk remaja' }
    ];
    const originalDatabase = JSON.parse(JSON.stringify(database));
    const allSections = document.querySelectorAll('main .container section');
    const noResultsMessage = document.getElementById('no-results');

    // Inisialisasi Chart.js
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: database.map(item => item.year),
            datasets: [{
                label: 'Persentase Rutin Ibadah (%)',
                data: database.map(item => item.percentage),
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true, max: 100 }
            }
        }
    });

    // FUNGSI UMUM
    function updateData() {
        myChart.data.labels = database.map(item => item.year);
        myChart.data.datasets[0].data = database.map(item => item.percentage);
        myChart.update();
        const lastPercentage = database[database.length - 1].percentage;
        const firstPercentage = database[0].percentage;
        const decline = firstPercentage - lastPercentage;
        document.getElementById('penurunan').innerText = `${decline}% (dari ${firstPercentage}% ke ${lastPercentage}% rutin ibadah)`;
        document.getElementById('progress-penurunan').style.width = `${lastPercentage}%`;
        document.getElementById('yearFilter').value = 'all';
        showToast('Data berhasil diupdate dengan simulasi 2024!');
        showSection('stats');
    }
    function resetData() {
        database = JSON.parse(JSON.stringify(originalDatabase));
        myChart.data.labels = database.map(item => item.year);
        myChart.data.datasets[0].data = database.map(item => item.percentage);
        myChart.update();
        const lastPercentage = database[database.length - 1].percentage;
        const firstPercentage = database[0].percentage;
        const decline = firstPercentage - lastPercentage;
        document.getElementById('penurunan').innerText = `${decline}% (dari ${firstPercentage}% ke ${lastPercentage}% rutin ibadah)`;
        document.getElementById('progress-penurunan').style.width = `${lastPercentage}%`;
        document.getElementById('yearFilter').value = 'all';
        showToast('Data dikembalikan ke kondisi awal.');
        showSection('stats');
    }
    function filterChart() {
        const filter = document.getElementById('yearFilter').value;
        let filteredData = database;
        if (filter === '2020-2022') {
            filteredData = database.filter(item => item.year >= 2020 && item.year <= 2022);
        } else if (filter === '2022-2024') {
            filteredData = database.filter(item => item.year >= 2022);
        }
        myChart.data.labels = filteredData.map(item => item.year);
        myChart.data.datasets[0].data = filteredData.map(item => item.percentage);
        myChart.update();
    }
    function editData(index) {
        const item = database[index];
        const newYear = prompt('Masukkan Tahun Baru:', item.year);
        const newPercentage = prompt('Masukkan Persentase Baru:', item.percentage);
        const newFactor = prompt('Masukkan Faktor Baru:', item.factor);
        const newSolution = prompt('Masukkan Saran Solusi Baru:', item.solution);

        if (newYear && newPercentage && newFactor && newSolution) {
            database[index] = {
                year: parseInt(newYear),
                percentage: parseInt(newPercentage),
                factor: newFactor,
                solution: newSolution
            };
            updateData();
            renderTable();
            showToast('Data berhasil diperbarui!');
        }
    }
    function deleteData(index) {
        if (confirm('Apakah Anda yakin ingin menghapus data ini?')) {
            database.splice(index, 1);
            updateData();
            renderTable();
            showToast('Data berhasil dihapus!');
        }
    }
    function renderTable() {
        const tableBody = document.querySelector('#dataTable tbody');
        tableBody.innerHTML = '';
        database.forEach((item, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.year}</td>
                <td>${item.percentage}%</td>
                <td>${item.factor}</td>
                <td>${item.solution}</td>
                <td>
                    <button class="edit-btn" onclick="editData(${index})"><i class="fas fa-edit"></i> Edit</button>
                    <button class="delete-btn" onclick="deleteData(${index})"><i class="fas fa-trash"></i> Hapus</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }
    function showSection(section) {
        allSections.forEach(sec => {
            sec.style.display = 'none';
        });
        noResultsMessage.style.display = 'none';
        document.getElementById('search-results-section').style.display = 'none';
        document.getElementById(`${section}-section`).style.display = 'block';
        if (section === 'checklist') {
            createChecklistTable();
        } else if (section === 'table') {
            renderTable();
        } else if (section === 'journal') {
            loadJournal();
        } else if (section === 'achievements') {
            checkAchievements();
        } else if (section === 'quiz') {
            showQuiz();
        } else if (section === 'leaderboard') { 
        renderLeaderboard();
        }
    }
    function showGoogleSearchResults() {
        allSections.forEach(sec => {
            sec.style.display = 'none';
        });
        document.getElementById('search-results-section').style.display = 'block';
    }
    window.onload = function() {
        const searchBox = document.querySelector('.gsc-input');
        const searchResultsDiv = document.querySelector('.gsc-control-cse .gsc-results');
        if (searchBox) {
            searchBox.addEventListener('keyup', (event) => {
                if (event.target.value.length > 0) {
                    showGoogleSearchResults();
                    if (searchResultsDiv) {
                       searchResultsDiv.style.display = 'block';
                    }
                } else {
                    showSection('home');
                    if (searchResultsDiv) {
                       searchResultsDiv.style.display = 'none';
                    }
                }
            });
        }
    };
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.innerText = message;
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 3000);
    }
    function toggleTheme() {
        const body = document.body;
        const isDarkMode = body.getAttribute('data-theme') === 'dark';
        const newTheme = isDarkMode ? 'light' : 'dark';
        body.setAttribute('data-theme', newTheme);
        document.querySelector('.theme-toggle button i').className = isDarkMode ? 'fas fa-moon' : 'fas fa-sun';
        document.querySelector('.theme-toggle button').innerText = isDarkMode ? 'Dark Mode' : 'Light Mode';
    }
    function previewImage(event) {
        const file = event.target.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('profile-picture').src = e.target.result;
                showToast('Foto profil berhasil diperbarui!');
            }
            reader.readAsDataURL(file);
        } else {
            showToast('Mohon unggah file gambar yang valid.');
        }
    }
    function playAudio(audioId) {
        const audio = document.getElementById(audioId);
        document.querySelectorAll('audio').forEach(a => {
            if (a !== audio) {
                a.pause();
                a.currentTime = 0;
            }
        });
        audio.play();
    }

    // FUNGSI CHECKLIST
    const sholatNames = ['Subuh', 'Zuhur', 'Ashar', 'Magrib', 'Isya'];
    const checklistStorageKey = 'sholatChecklist40Hari';
    let selectedColor = 'green';

    function createChecklistTable() {
        const checklistBody = document.getElementById('checklist-body');
        checklistBody.innerHTML = '';
        sholatNames.forEach(sholat => {
            const row = document.createElement('tr');
            row.innerHTML = `<td class="sticky left-0 bg-container-bg">${sholat}</td>`;
            for (let i = 1; i <= 40; i++) {
                const cell = document.createElement('td');
                cell.id = `${sholat.toLowerCase()}-day-${i}`;
                cell.classList.add('checklist-cell');
                cell.addEventListener('click', () => handleChecklistChange(sholat, i));
                row.appendChild(cell);
            }
            checklistBody.appendChild(row);
        });
        loadChecklist();
    }
    function handleChecklistChange(sholat, day) {
    const cell = document.getElementById(`${sholat.toLowerCase()}-day-${day}`);
    const currentClass = Array.from(cell.classList).find(cls => ['green', 'orange', 'red'].includes(cls));
    
    // Simpan status lama sebelum diubah
    const oldColor = currentClass;

    // Hapus kelas warna yang ada
    if (currentClass) {
        cell.classList.remove(currentClass);
    }

    // Tentukan warna baru
    let newColor = '';
    if (currentClass !== selectedColor) {
        cell.classList.add(selectedColor);
        cell.innerText = getSymbol(selectedColor);
        newColor = selectedColor;
    } else {
        cell.innerText = '';
    }

    // --- LOGIKA PERUBAHAN POIN ---
    const pointsToAdd = 20;
    const pointsToSubtract = 50;
    let currentPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);

    // 1. Logika penambahan poin (jika berubah ke hijau atau oranye)
    const isNewColorValid = newColor === 'green' || newColor === 'orange';
    const isOldColorValid = oldColor === 'green' || oldColor === 'orange';
    
    if (isNewColorValid && !isOldColorValid) {
        currentPoints += pointsToAdd;
        showToast(`Selamat! Kamu dapat ${pointsToAdd} poin untuk sholat ${sholat} di hari ${day}.`);
    } 
    // 2. Logika pengurangan poin (jika berubah ke merah)
    // Poin akan berkurang jika sebelumnya bukan warna merah
    else if (newColor === 'red' && oldColor !== 'red') {
        currentPoints -= pointsToSubtract;
        showToast(`Poin berkurang! ${pointsToSubtract} poin dikurangi untuk sholat ${sholat} di hari ${day}.`);
    }

    // Perbarui poin di penyimpanan lokal dan tampilan
    localStorage.setItem(pointsStorageKey, currentPoints);
    document.getElementById('ibadah-points').innerText = currentPoints;

    saveChecklist();
    checkAchievements();
}

    function saveChecklist() {
        const checklistData = {};
        sholatNames.forEach(sholat => {
            checklistData[sholat.toLowerCase()] = {};
            for (let i = 1; i <= 40; i++) {
                const cell = document.getElementById(`${sholat.toLowerCase()}-day-${i}`);
                const color = Array.from(cell.classList).find(cls => ['green', 'orange', 'red'].includes(cls));
                checklistData[sholat.toLowerCase()][i] = color || '';
            }
        });
        localStorage.setItem(checklistStorageKey, JSON.stringify(checklistData));
        showToast('Checklist berhasil disimpan!');
    }
    function loadChecklist() {
        const savedData = localStorage.getItem(checklistStorageKey);
        if (savedData) {
            const checklistData = JSON.parse(savedData);
            sholatNames.forEach(sholat => {
                for (let i = 1; i <= 40; i++) {
                    const cell = document.getElementById(`${sholat.toLowerCase()}-day-${i}`);
                    const color = checklistData[sholat.toLowerCase()][i];
                    if (cell) {
                        cell.classList.remove('green', 'orange', 'red');
                        if (color) {
                            cell.classList.add(color);
                            cell.innerText = getSymbol(color);
                        } else {
                            cell.innerText = '';
                        }
                    }
                }
            });
        }
    }
    function clearChecklist() {
        if (confirm('Apakah Anda yakin ingin mereset semua checklist?')) {
            localStorage.removeItem(checklistStorageKey);
            createChecklistTable();
            showToast('Checklist berhasil direset!');
            checkAchievements();
        }
    }
    function getSymbol(color) {
        switch (color) {
            case 'red': return '✗';
            case 'green': return '✓';
            case 'orange': return '●';
            default: return '';
        }
    }

    // FUNGSI JURNAL DAN POIN
    const ibadahPoints = {
        'Sholat Fardhu': 10,
        'Sholat Sunnah': 5,
        'Baca Al-Quran': 15,
        'Sedekah': 20,
        'Puasa Sunnah': 25,
        'Lain-lain': 5
    };
    const journalStorageKey = 'ibadahJournal';
    const pointsStorageKey = 'ibadahPoints';
    
    function addIbadah() {
        const ibadahType = document.getElementById('ibadah-select').value;
        const ibadahDetail = document.getElementById('ibadah-detail').value;
        const points = ibadahPoints[ibadahType] || 0;
        
        const newEntry = {
            id: Date.now(),
            date: new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }),
            type: ibadahType,
            detail: ibadahDetail,
            points: points
        };
        
        let savedEntries = JSON.parse(localStorage.getItem(journalStorageKey)) || [];
        savedEntries.unshift(newEntry);
        localStorage.setItem(journalStorageKey, JSON.stringify(savedEntries));
        
        let currentPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);
        currentPoints += points;
        localStorage.setItem(pointsStorageKey, currentPoints);

        document.getElementById('ibadah-detail').value = '';
        showToast(`Berhasil menambahkan ibadah. Kamu dapat ${points} poin!`);
        loadJournal();
        checkAchievements();
    }
    function loadJournal() {
        const journalList = document.getElementById('journal-list');
        journalList.innerHTML = '';
        
        const totalPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);
        document.getElementById('ibadah-points').innerText = totalPoints;

        const savedEntries = JSON.parse(localStorage.getItem(journalStorageKey)) || [];
        if (savedEntries.length === 0) {
            journalList.innerHTML = '<p style="text-align: center;">Belum ada entri jurnal.</p>';
            return;
        }
        
        savedEntries.forEach(entry => {
            const entryDiv = document.createElement('div');
            entryDiv.classList.add('journal-entry');
            entryDiv.setAttribute('data-id', entry.id);
            
            let detailHtml = entry.detail ? `<p><strong>Detail:</strong> ${entry.detail}</p>` : '';

            entryDiv.innerHTML = `
                <h4><i class="fas fa-calendar-alt"></i> ${entry.date}</h4>
                <p><strong>Ibadah:</strong> ${entry.type} (+${entry.points} poin)</p>
                ${detailHtml}
                <div class="journal-entry-actions">
                    <button class="delete-btn" onclick="deleteJournal(${entry.id})"><i class="fas fa-trash"></i> Hapus</button>
                </div>
            `;
            journalList.appendChild(entryDiv);
        });
    }
    function deleteJournal(id) {
        if (confirm('Apakah Anda yakin ingin menghapus entri jurnal ini?')) {
            let savedEntries = JSON.parse(localStorage.getItem(journalStorageKey)) || [];
            const entryToDelete = savedEntries.find(entry => entry.id === id);
            
            if (entryToDelete) {
                let currentPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);
                currentPoints -= entryToDelete.points;
                localStorage.setItem(pointsStorageKey, currentPoints);
            }
            
            savedEntries = savedEntries.filter(entry => entry.id !== id);
            localStorage.setItem(journalStorageKey, JSON.stringify(savedEntries));
            showToast('Jurnal berhasil dihapus!');
            loadJournal();
            checkAchievements();
        }
    }
    
    // FUNGSI QUIZ
    const quizDataByDate = {
        '2025-09-24': [
            {
                question: "Berapa kali sholat fardhu dalam sehari semalam?",
                answers: { a: "3 kali", b: "5 kali", c: "7 kali" },
                correctAnswer: "b",
                points: 20
            },
            {
                question: "Siapakah Nabi yang dijuluki 'Bapak Para Nabi'?",
                answers: { a: "Nabi Musa a.s.", b: "Nabi Isa a.s.", c: "Nabi Ibrahim a.s." },
                correctAnswer: "c",
                points: 20
            },
            {
                question: "Rukun Islam yang pertama adalah?",
                answers: { a: "Membaca syahadat", b: "Sholat", c: "Puasa" },
                correctAnswer: "a",
                points: 20
            }
        ],
        '2025-09-25': [
            {
                question: "Malaikat yang bertugas mencatat amal baik manusia adalah?",
                answers: { a: "Malik", b: "Raqib", c: "Munkar" },
                correctAnswer: "b",
                points: 20
            },
            {
                question: "Sebutkan nama masjid yang pertama kali dibangun di Madinah!",
                answers: { a: "Masjid Nabawi", b: "Masjidil Haram", c: "Masjid Quba" },
                correctAnswer: "c",
                points: 20
            },
            {
                question: "Bulan apa umat Islam wajib berpuasa?",
                answers: { a: "Ramadhan", b: "Syawal", c: "Rajab" },
                correctAnswer: "a",
                points: 20
            }
        ],
        '2025-09-26': [
            {
                question: "Berapa jumlah rukun sholat?",
                answers: { a: "10", b: "13", c: "15" },
                correctAnswer: "b",
                points: 20
            },
            {
                question: "Siapakah istri pertama Nabi Muhammad ﷺ?",
                answers: { a: "Aisyah", b: "Khadijah", c: "Fatimah" },
                correctAnswer: "b",
                points: 20
            },
            {
                question: "Sikap saat mendengar adzan adalah?",
                answers: { a: "Berlari", b: "Mengobrol", c: "Diam dan menjawabnya" },
                correctAnswer: "c",
                points: 20
            }
        ]
    };

    function showQuiz() {
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = '';
        
        const today = new Date().toISOString().slice(0, 10);
        
        const currentQuizData = quizDataByDate[today] || quizDataByDate['2025-09-25'];
        
        currentQuizData.forEach((quiz, index) => {
            const quizDiv = document.createElement('div');
            quizDiv.classList.add('quiz-item');
            
            let answersHtml = Object.keys(quiz.answers).map(key => `
                <label>
                    <input type="radio" name="question${index}" value="${key}">
                    ${quiz.answers[key]}
                </label><br>
            `).join('');

            quizDiv.innerHTML = `
                <p><strong>${index + 1}. ${quiz.question}</strong></p>
                <form id="quiz-form-${index}">${answersHtml}</form>
            `;
            quizContainer.appendChild(quizDiv);
        });

        const submitButton = document.createElement('button');
        submitButton.innerText = 'Selesai Kuis';
        submitButton.onclick = () => submitQuiz(currentQuizData);
        quizContainer.appendChild(submitButton);
    }
    function submitQuiz(quizData) {
        let score = 0;
        let totalPoints = 0;
        let allCorrect = true;

        quizData.forEach((quiz, index) => {
            const form = document.getElementById(`quiz-form-${index}`);
            const selectedAnswer = form.querySelector(`input[name="question${index}"]:checked`);
            
            if (selectedAnswer && selectedAnswer.value === quiz.correctAnswer) {
                score++;
                totalPoints += quiz.points;
            } else {
                allCorrect = false;
            }
        });

        let currentPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);
        currentPoints += totalPoints;
        localStorage.setItem(pointsStorageKey, currentPoints);

        showToast(`Kamu mendapatkan ${totalPoints} poin dari kuis ini!`);
        
        if (allCorrect) {
            let achievements = JSON.parse(localStorage.getItem(achievementsStorageKey)) || {};
            if (!achievements.quizMaster) {
                achievements.quizMaster = true;
                localStorage.setItem(achievementsStorageKey, JSON.stringify(achievements));
                showNotification('Pencapaian Baru!', 'Selamat! Kamu berhasil menjawab semua kuis dengan benar. Lencana "Quiz Master" telah terbuka.');
            }
        }
        
        const quizContainer = document.getElementById('quiz-container');
        quizContainer.innerHTML = `
            <h3>Hasil Kuis</h3>
            <p>Kamu berhasil menjawab <strong>${score} dari ${quizData.length}</strong> pertanyaan dengan benar.</p>
            <p>Total poin yang kamu dapatkan: <strong>${totalPoints}</strong></p>
            <button onclick="showQuiz()">Ulangi Kuis</button>
        `;

        loadJournal();
        updateAchievementsDisplay();
    }

    // FUNGSI PENCAPAIAN
    const achievementsStorageKey = 'ibadahAchievements';
    function checkAchievements() {
        let achievements = JSON.parse(localStorage.getItem(achievementsStorageKey)) || {};
        const checklistData = JSON.parse(localStorage.getItem(checklistStorageKey)) || {};
        const journalEntries = JSON.parse(localStorage.getItem(journalStorageKey)) || [];
        const totalPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);

        // Pencapaian Hari Pertama
        const today = new Date().toLocaleDateString('id-ID', { weekday: 'long' });
        const dayChecklist = sholatNames.some(sholat => checklistData[sholat.toLowerCase()] && Object.values(checklistData[sholat.toLowerCase()]).some(val => val === 'green' || val === 'orange'));
        if (!achievements.firstDay && (dayChecklist || journalEntries.length > 0)) {
            achievements.firstDay = true;
            showNotification('Hari Pertama', 'Selamat! Kamu telah berhasil melakukan ibadah pertamamu.');
        }

        // Pencapaian 10 Hari
        const consecutiveDays = getLongestStreak();
        if (!achievements['10Days'] && consecutiveDays >= 10) {
            achievements['10Days'] = true;
            showNotification('10 Hari Berturut-turut', 'Luar biasa! Kamu berhasil konsisten selama 10 hari.');
        }

        // Pencapaian 40 Hari Sempurna
        let completed40Days = true;
        for (let i = 1; i <= 40; i++) {
            if (sholatNames.some(sholat => !checklistData[sholat.toLowerCase()] || !checklistData[sholat.toLowerCase()][i] || checklistData[sholat.toLowerCase()][i] === 'red')) {
                completed40Days = false;
                break;
            }
        }
        if (!achievements['40Days'] && completed40Days) {
            achievements['40Days'] = true;
            showNotification('40 Hari Sempurna!', 'Alhamdulillah! Kamu berhasil menuntaskan tantangan 40 hari. Semoga menjadi kebiasaan selamanya.');
        }

        // Pencapaian Jurnal Pertama
        if (!achievements.firstJournal && journalEntries.length > 0) {
            achievements.firstJournal = true;
            showNotification('Jurnal Pertama', 'Selamat! Jurnal ibadah pertamamu berhasil disimpan.');
        }
        
        // Pencapaian Master Poin
        if (!achievements.pointMaster && totalPoints >= 100) {
             achievements.pointMaster = true;
             showNotification('Master Poin!', 'Selamat! Kamu telah mencapai 100 poin. Teruslah beribadah!');
        }
        
        localStorage.setItem(achievementsStorageKey, JSON.stringify(achievements));
        updateAchievementsDisplay();
    }
    function getLongestStreak() {
        const checklistData = JSON.parse(localStorage.getItem(checklistStorageKey)) || {};
        if (Object.keys(checklistData).length === 0) return 0;
        
        let maxStreak = 0;
        let currentStreak = 0;
        
        for (let i = 1; i <= 40; i++) {
            const allSholatChecked = sholatNames.every(sholat => {
                const status = checklistData[sholat.toLowerCase()][i];
                return status === 'green' || status === 'orange';
            });
            
            if (allSholatChecked) {
                currentStreak++;
            } else {
                if (currentStreak > maxStreak) {
                    maxStreak = currentStreak;
                }
                currentStreak = 0;
            }
        }
        return Math.max(maxStreak, currentStreak);
    }
    function updateAchievementsDisplay() {
        const achievements = JSON.parse(localStorage.getItem(achievementsStorageKey)) || {};
        document.getElementById('badge-first-day').classList.toggle('unlocked', achievements.firstDay);
        document.getElementById('badge-10-days').classList.toggle('unlocked', achievements['10Days']);
        document.getElementById('badge-40-days').classList.toggle('unlocked', achievements['40Days']);
        document.getElementById('badge-first-journal').classList.toggle('unlocked', achievements.firstJournal);
        document.getElementById('badge-point-master').classList.toggle('unlocked', achievements.pointMaster); 
    }

    // FUNGSI NOTIFIKASI SIMULASI
    function showNotification(title, message) {
        const notif = document.getElementById('prayer-notification');
        const notifTitle = notif.querySelector('h4');
        const notifMessage = notif.querySelector('p');
        
        notifTitle.innerHTML = `<i class="fas fa-bell"></i> ${title}`;
        notifMessage.innerText = message;
        
        notif.style.display = 'block';
        notif.classList.remove('hidden');

        setTimeout(() => {
            notif.classList.add('hidden');
        }, 5000);
    }

    // FUNGSI PENGINGAT SHOLAT SIMULASI
    function setPrayerReminder(prayerName, delay) {
        setTimeout(() => {
            const prayerNotif = document.getElementById('prayer-notification');
            prayerNotif.querySelector('#prayer-name').innerText = prayerName;
            prayerNotif.style.display = 'block';
            prayerNotif.classList.remove('hidden');
            setTimeout(() => {
                prayerNotif.classList.add('hidden');
            }, 5000);
        }, delay);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        const searchResultsSection = document.getElementById('search-results-section');
        if (searchResultsSection) {
            searchResultsSection.style.display = 'none';
        }
        if (typeof Chart === 'undefined') {
            document.querySelector('.chart-container').innerHTML = '<p style="text-align:center; color:red;">Grafik tidak tersedia. Silakan periksa koneksi internet Anda.</p>';
        }
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                selectedColor = e.target.dataset.color;
                showToast(`Warna terpilih: ${e.target.innerText}`);
            });
        });
        createChecklistTable();
        loadJournal();
        updateAchievementsDisplay();
        showSection('home');
        // --- FUNGSI LEADERBOARD SIMULASI ---
function renderLeaderboard() {
    const leaderboardTableBody = document.querySelector('#leaderboard-table tbody');
    leaderboardTableBody.innerHTML = '';
    
    const myTotalPoints = parseInt(localStorage.getItem(pointsStorageKey) || 0);
    // Asumsi: Kita hanya menyimpan poin mingguan fiktif dan menambahkan poin pengguna saat ini
    
    // Data fiktif untuk simulasi Leaderboard Mingguan
    let mockUsers = [
        { name: "Siti K.", points: 120 },
        { name: "Budi J.", points: 95 },
        { name: "Ahmad M.", points: 150 },
        { name: "Ria S.", points: 80 },
    ];

    // Menghitung Poin Minggu Ini (Contoh: 1/4 dari total poin sebagai simulasi)
    const myWeeklyPoints = Math.floor(myTotalPoints / 4) + 100; // Ditambah 100 agar terlihat kompetitif
    const myName = "Saya (Anda)";
    
    // Tambahkan pengguna saat ini ke dalam daftar simulasi
    let currentUserData = { name: myName, points: myWeeklyPoints };
    
    // Cek apakah pengguna saat ini sudah ada di daftar fiktif
    let userIndex = mockUsers.findIndex(u => u.name === myName);
    if (userIndex !== -1) {
        mockUsers[userIndex].points = myWeeklyPoints;
    } else {
        mockUsers.push(currentUserData);
    }

    // Urutkan (sort) berdasarkan poin (tertinggi ke terendah)
    mockUsers.sort((a, b) => b.points - a.points);
    
    // Tampilkan Poin Pengguna di kotak Leaderboard
    document.getElementById('current-user-points-weekly').innerText = myWeeklyPoints;

    // Tampilkan data di tabel
    mockUsers.forEach((user, index) => {
        const row = document.createElement('tr');
        const rank = index + 1;
        
        let userNameDisplay = user.name;
        if (user.name === myName) {
            row.style.fontWeight = 'bold';
            row.style.backgroundColor = 'var(--accent-color)';
            row.style.color = 'white';
            userNameDisplay = `⭐ ${user.name} ⭐`;
        }

        row.innerHTML = `
            <td>${rank}</td>
            <td>${userNameDisplay}</td>
            <td>${user.points} Poin</td>
        `;
        leaderboardTableBody.appendChild(row);
    });
}

   });
</script>
